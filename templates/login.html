{#
author: 徐婉青，高煜嘉，黄祉琪
create: 2020-07-09
update: 2020-07-14
#}

{% extends 'base.html' %}

{% block title %}登录{% endblock %}

{% block head %}
    <link rel="stylesheet" href="{{ url_for('static',filename='css/login.css') }}">
{% endblock %}

{% block main %}
    <h3 class="page-title">登录</h3>
    <form action="" method="post">
        <div class="form-container">
            <div class="form-group">
                <input type="text" class="form-control" placeholder="请输入手机号/邮箱" name="telephone">
            </div>
            <div class="form-group">
                <input type="password" class="form-control" placeholder="密码" name="password">
            </div>
            <div class="form-group">
                <input type="text" class="form-control" placeholder="验证码" name="captcha"><br>
                <img src="{{ url_for('get_pic') }}" alt="ABC" style="width: 120px;height: 40px" class="image" id="pic">&nbsp;&nbsp;
                <a href="javascript:void(0);" id="refresh">看不清？点击刷新</a>
            </div>

            <span>
                {% for msg in get_flashed_messages() %}
                    {{ msg }}
                {% endfor %}
            </span>

            <ul class="list-inline">
                <li><a href="{{ url_for('vertifyEmail') }}">找回密码</a></li>
                <li><a href="{{ url_for('register') }}">注册新用户</a></li>
            </ul>
            <div class="form-group">
                <button class="btn btn-primary btn-block"> 登录</button>
            </div>
        </div>
    </form>

    <script type="text/javascript">
    $('#pic').click(function() {
        $(this).attr('src','{{ url_for('get_pic') }}?ran='+Math.random());
    })

    $('#refresh').click(function() {
        $(document.getElementById('pic')).attr('src','{{ url_for('get_pic') }}?ran='+Math.random());
    })
    {#var code = document.getElementById('pic')#}
    {#function change(){#}
    {#    code.attr('src','{{ url_for('get_pic') }}?ran='+Math.random());#}
    {# } #}
    </script>
{% endblock %}

